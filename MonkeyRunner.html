<html>
<head>
  <title>MonkeyRunner</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/277494; Windows/10.0.10586 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="389"/>
<h1>MonkeyRunner</h1>

<div>
<span><div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><h1 style="color: rgba(0, 0, 0, 0.867188); font-size: 44px; margin: 24px 0px 12px; font-weight: 300; font-family: Roboto, sans-serif; widows: 1; background-color: rgb(255, 255, 255);">monkeyrunner</h1><div style="widows: 1; background-color: rgb(255, 255, 255);"><div style="float: right; clear: right; margin: 6px 0px 0px 30px; padding: 0px 0px 30px;"><div style="border: 1px solid rgb(229, 229, 229); box-sizing: border-box; float: right; padding: 5px 0px; width: 240px;"><h2 style="color: inherit; clear: left; font-size: 16px; font-weight: 400; margin: 10px 0px 4px; border-top-width: 0px; padding: 0px 15px;"><span style="font-family: Roboto, sans-serif;">In this document</span></h2><ol style="margin: 0px 15px 15px; padding: 0px; list-style: none; font-size: inherit;"><li style="margin: 8px 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#SampleProgram" style="color: rgb(3, 155, 229); text-decoration: none;">A Simple monkeyrunner Program</a></span></span></li><li style="margin: 8px 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#APIClasses" style="color: rgb(3, 155, 229); text-decoration: none;">The monkeyrunner API</a></span></span></li><li style="margin: 8px 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#RunningMonkeyRunner" style="color: rgb(3, 155, 229); text-decoration: none;">Running monkeyrunner</a></span></span></li><li style="margin: 8px 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#Help" style="color: rgb(3, 155, 229); text-decoration: none;">monkeyrunner Built-in Help</a></span></span></li><li style="margin: 8px 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#Plugins" style="color: rgb(3, 155, 229); text-decoration: none;">Extending monkeyrunner with Plugins</a></span></span></li></ol><h2 style="color: inherit; clear: left; font-size: 16px; font-weight: 400; margin: 15px 0px 4px; border-top-width: 1px; border-top-style: solid; border-top-color: rgb(229, 229, 229); padding: 10px 15px 0px;"><span style="font-family: Roboto, sans-serif;">See Also</span></h2><ol style="margin: 0px 15px 15px; padding: 0px; list-style: none; font-size: inherit;"><li style="margin: 8px 0px; padding: 0px 0px 0px 16px; position: relative;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><a href="http://developer.android.com/tools/testing/testing_android.html" style="color: rgb(3, 155, 229); text-decoration: none;">Testing Fundamentals</a></span></span></li></ol></div></div><div style="margin: 0px 0px 16px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 16px;"><span style="font-family: Roboto, sans-serif;">The monkeyrunner tool provides an API for writing programs that control an Android device or emulator from outside of Android code.</span></span></span></div><div><span style="font-size: 15px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;">MR 是一款提供API的工具， 用于</span></span>写 在<span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;">安卓代码外部控制安卓设备和模拟器的程序</span></span></span></div><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 16px;"><span style="font-family: Roboto, sans-serif;">With monkeyrunner, you can write a Python program that installs an Android application or test package, runs it, sends keystrokes to it, takes screenshots of its user interface, and stores screenshots on the workstation. The monkeyrunner tool is primarily designed to test applications and devices at the functional/framework level and for running unit test suites, but you are free to use it for other purposes.</span></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Roboto;">有了MR， 你可以写个安装安卓应用和测试包的Python程序， 运行包， 应用发送一系列键盘事件，对用户界面进行截图并将截图保存在工作站中。 MR主要时用于从功能测试和framework级别来测试应用和设备以及运行单元测试用例。 但你也可以用作别的目的。</span></span></div></div><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">The monkeyrunner tool is not related to the <a href="http://developer.android.com/tools/help/monkey.html" style="color: rgb(3, 155, 229); text-decoration: none;">UI/Application Exerciser Monkey</a>, also known as the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">monkey</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> tool. The </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">monkey</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> tool runs in an </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://developer.android.com/tools/help/adb.html" style="color: rgb(3, 155, 229); text-decoration: none;">adb</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> shell directly on the device or emulator and generates pseudo-random streams of user and system events. In comparison, the monkeyrunner tool controls devices and emulators from a workstation by sending specific commands and events from an API.</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">MR与 monkey tool无关（</span></font><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"><span style="color: rgba(0, 0, 0, 0.679688);"> </span><a href="http://developer.android.com/tools/help/monkey.html" style="color: rgb(3, 155, 229); text-decoration: none;">UI/Application Exerciser Monkey</a>）。 虽然两者都可以控制设备和模拟器，但后者是直接运行在设备或模拟器的adb shell 里， 然后会生成用户伪随机流和系统事件； 相对来说， MR调用API发送指定命令和事件来达到控制设备和模拟器的 目的</span></span></div></div><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">The monkeyrunner tool provides these unique features for Android testing:</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">MR在安卓测试中有几个独特的功能</span></font></div></div><ul style="margin: 0px 0px 15px 20px; padding: 0px;"><li style="margin: 0px 0px 12px;"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"><span style="color: rgba(0, 0, 0, 0.679688);">Multiple device control: The monkeyrunner API can apply one or more test suites across multiple devices or emulators. You can physically attach all the devices or start up all the emulators (or both) at once, connect to each one in turn programmatically, and then run one or more tests. You can also start up an emulator configuration programmatically, run one or more tests, and then shut down the emulator.<br/></span>多设备控制： MRAPI可以同时运行一套或多套测试用例来控制多台设备或模拟器。 你可以一次用USB连接多台设备，运行多个模拟器， 再通过编程意义连接， 然后做一个或多个测试。 对于模拟器，你也可以编程来启动模拟器的配置然后关掉模拟器</span></span></li><li style="margin: 0px 0px 12px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">Functional testing: monkeyrunner can run an automated start-to-finish test of an Android application. You provide input values with keystrokes or touch events, and view the results as screenshots.<br/>
功能测试， MR可以运行安卓应用 的 一个</span></span></span><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">自动</span></span></span> 开始<span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">-结束</span></span></span><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">测试。 你可以提供点击键盘事件或触摸来输入值的事件， 然后截图来查看结果</span></span></span></li><li style="margin: 0px 0px 12px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">Regression testing - monkeyrunner can test application stability by running an application and comparing its output screenshots to a set of screenshots that are known to be correct.<br/>
回归测试 MR可以测试应用的稳定性， 运行应用， 将输出结果的截图与一套正确的结果截图来做比较</span></span></span></li><li style="margin: 0px 0px 12px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">Extensible automation - Since monkeyrunner is an API toolkit, you can develop an entire system of Python-based modules and programs for controlling Android devices. Besides using the monkeyrunner API itself, you can use the standard Python </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://docs.python.org/library/os.html" style="color: rgb(3, 155, 229); text-decoration: none;">os</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> and </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://docs.python.org/library/subprocess.html" style="color: rgb(3, 155, 229); text-decoration: none;">subprocess</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> modules to call Android tools such as <a href="http://developer.android.com/tools/help/adb.html" style="color: rgb(3, 155, 229); text-decoration: none;">Android Debug Bridge</a>.<br/>
可扩展自动化- 有了MR这个API工具箱， 你可以开发一整套基于Python的模块和程序来控制安卓设备， 除此之外， MR本身也可以作为接口， 你可用 standard Python os和子程序模块来调用ADB<br/></span></span></span><div style="margin: 6px 0px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">You can also add your own classes to the monkeyrunner API. This is described in more detail in the section <a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#Plugins" style="color: rgb(3, 155, 229); text-decoration: none;">Extending monkeyrunner with plugins</a>.<br/>
你也可以将自己的类加到MR的API中。 更多详情请看</span></span></span><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> <a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#Plugins" style="color: rgb(3, 155, 229); text-decoration: none;">Extending monkeyrunner with plugins</a>.</span></span></span></div></li></ul><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">The monkeyrunner tool uses <a href="http://www.jython.org/" style="color: rgb(3, 155, 229); text-decoration: none;">Jython</a>, a implementation of Python that uses the Java programming language. Jython allows the monkeyrunner API to interact easily with the Android framework. With Jython you can use Python syntax to access the constants, classes, and methods of the API.</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">MR工具使用 Jython， Jython底层用的是Java， 上层用的是Python。 有了Jython， MR与安卓框架交互起来很方便， 用户可以使用Python的语法来访问MR API中的 敞亮， 类和方法</span></font></div></div><h2 style="color: rgba(0, 0, 0, 0.870588); clear: left; font-size: 28px; font-weight: 400; margin: 24px 0px 0px;"><span style="font-family: Roboto, sans-serif;">A Simple monkeyrunner Program</span></h2><hr style="height: 1px; margin: 7px 0px 12px; border: 0px; background: rgb(229, 229, 229);"/><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">Here is a simple monkeyrunner program that connects to a device, creating a </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://developer.android.com/tools/help/MonkeyDevice.html" style="color: rgb(3, 155, 229); text-decoration: none;">MonkeyDevice</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> object. Using the</span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">MonkeyDevice</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> object, the program installs an Android application package, runs one of its activities, and sends key events to the activity. The program then takes a screenshot of the result, creating a </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://developer.android.com/tools/help/MonkeyImage.html" style="color: rgb(3, 155, 229); text-decoration: none;">MonkeyImage</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> object. From this object, the program writes out a </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">.png</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> file containing the screenshot.</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">下面是一个简单的连接设备的MR程序。 创造一个 MonkeyDevice对象。 使用这个对象， 程序安装一个安卓应用包， 运行应用中的主程序， 向主程序发送点键盘事件。 接下来程序会创建 MonkeyImage对象</span></font><font face="Roboto, sans-serif"><span style="font-size: 14px;">将结果截图</span></font> <font face="Roboto, sans-serif"><span style="font-size: 14px;">， 写出一个. png 文件包含这个截图。</span></font></div></div><pre style="font-size: 13px; margin-top: 0px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); background-position: initial initial; background-repeat: initial initial;">
# Imports the monkeyrunner modules used by this program<span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(0, 0, 136);">from</span><span style="color: rgb(0, 0, 0);"> com</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">android</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">monkeyrunner </span><span style="color: rgb(0, 0, 136);">import</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 0, 102);">MonkeyRunner</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 0, 102);">MonkeyDevice</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># Connects to the current device, returning a MonkeyDevice object<span style="color: rgb(0, 0, 0);"><br/>device </span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 0, 102);">MonkeyRunner</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">waitForConnection</span><span style="color: rgb(102, 102, 0);">()</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># Installs the Android package. Notice that this method returns a boolean, so you can test<span style="color: rgb(0, 0, 0);"><br/></span># to see if the installation worked.<span style="color: rgb(0, 0, 0);"><br/>device</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">installPackage</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(136, 0, 0);">'myproject/bin/MyApplication.apk'</span><span style="color: rgb(102, 102, 0);">)</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># sets a variable with the package's internal name<span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(0, 0, 136);">package</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">'com.example.android.myapplication'</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># sets a variable with the name of an Activity in the package<span style="color: rgb(0, 0, 0);"><br/>activity </span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">'com.example.android.myapplication.MainActivity'</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># sets the name of the component to start<span style="color: rgb(0, 0, 0);"><br/>runComponent </span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(0, 0, 136);">package</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 102, 0);">+</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">'/'</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 102, 0);">+</span><span style="color: rgb(0, 0, 0);"> activity<br/><br/></span># Runs the component<span style="color: rgb(0, 0, 0);"><br/>device</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">startActivity</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(0, 0, 0);">component</span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(0, 0, 0);">runComponent</span><span style="color: rgb(102, 102, 0);">)</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># Presses the Menu button<span style="color: rgb(0, 0, 0);"><br/>device</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">press</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(136, 0, 0);">'KEYCODE_MENU'</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 0, 102);">MonkeyDevice</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">DOWN_AND_UP</span><span style="color: rgb(102, 102, 0);">)</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># Takes a screenshot<span style="color: rgb(0, 0, 0);"><br/>result </span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(0, 0, 0);"> device</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">takeSnapshot</span><span style="color: rgb(102, 102, 0);">()</span><span style="color: rgb(0, 0, 0);"><br/><br/></span># Writes the screenshot to a file<span style="color: rgb(0, 0, 0);"><br/>result</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">writeToFile</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(136, 0, 0);">'myproject/shot1.png'</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(136, 0, 0);">'png'</span><span style="color: rgb(102, 102, 0);">)</span></pre><h2 style="color: rgba(0, 0, 0, 0.870588); clear: left; font-size: 28px; font-weight: 400; margin: 24px 0px 0px;"><span style="font-family: Roboto, sans-serif;">The monkeyrunner API</span></h2><hr style="height: 1px; margin: 7px 0px 12px; border: 0px; background: rgb(229, 229, 229);"/><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">The monkeyrunner API is contained in three modules in the package </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">com.android.monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">:</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">MR API包含在包 </span></font><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">com.android.monkeyrunner</code> <font face="Roboto, sans-serif"><span style="font-size: 14px;">里三个模块中</span></font></div></div><ul style="margin: 0px 0px 15px 20px; padding: 0px;"><li style="margin: 0px 0px 12px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://developer.android.com/tools/help/MonkeyRunner.html" style="color: rgb(3, 155, 229); text-decoration: none;">MonkeyRunner</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">: A class of utility methods for monkeyrunner programs. This class provides a method for connecting monkeyrunner to a device or emulator. It also provides methods for creating UIs for a monkeyrunner program and for displaying the built-in help.<br/>
这个类中包含了MR程序中的通用方法。 该类提供了将MR连接到设备或模拟器的方法。 还有其他方法比如为为程序创建UI， 显示内置help等等。</span></span></span></li><li style="margin: 0px 0px 12px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://developer.android.com/tools/help/MonkeyDevice.html" style="color: rgb(3, 155, 229); text-decoration: none;">MonkeyDevice</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">: Represents a device or emulator. This class provides methods for installing and uninstalling packages, starting an Activity, and sending keyboard or touch events to an application. You also use this class to run test packages.<br/>
用来设备或模拟器。 这个类提供了安装或卸载包的方法， 启动一个Activity， 想应用发送键盘或触摸事件。 你也可以用这个类来运行测试包</span></span></span></li><li style="margin: 0px 0px 12px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><a href="http://developer.android.com/tools/help/MonkeyImage.html" style="color: rgb(3, 155, 229); text-decoration: none;">MonkeyImage</a></code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">: Represents a screen capture image. This class provides methods for capturing screens, converting bitmap images to various formats, comparing two MonkeyImage objects, and writing an image to a file.<br/>
用来捕获屏幕截图。 这个类提供了这些方法： 截图，位图转换成多种格式， 比较 2 个对象， 将图片写进文件等。</span></span></span></li></ul><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">In a Python program, you access each class as a Python module. The monkeyrunner tool does not import these modules automatically. To import a module, use the Python </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">from</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> statement:</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">在Python程序中， 你可以以Python模块的方式来访问每一个类。 MR工具不能自动引入模块， 得用  Python语言中的from声明</span></font></div></div><pre style="font-size: 13px; margin-top: 0px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); background-position: initial initial; background-repeat: initial initial;"><span style="color: rgb(0, 0, 136);">from</span><span style="color: rgb(0, 0, 0);"> com</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">android</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">monkeyrunner </span><span style="color: rgb(0, 0, 136);">import</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">&lt;module&gt;</span></pre><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">where </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">&lt;module&gt;</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> is the class name you want to import. You can import more than one module in the same </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">from</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">statement by separating the module names with commas.</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">这里</span></font><code style="font-size: 13px; font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><span style="color: rgb(0, 102, 0);">&lt;module&gt;</span><span style="font-size: 15px;">是你想引入的类的名字。 在from声明中你也可以引入多个模块， 模块之间用逗号隔开</span></code></div></div><h2 style="color: rgba(0, 0, 0, 0.870588); clear: left; font-size: 28px; font-weight: 400; margin: 24px 0px 0px;"><span style="font-family: Roboto, sans-serif;">Running monkeyrunner</span></h2><hr style="height: 1px; margin: 7px 0px 12px; border: 0px; background: rgb(229, 229, 229);"/><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">You can either run monkeyrunner programs from a file, or enter monkeyrunner statements in an interactive session. You do both by invoking the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> command which is found in the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">tools/</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> subdirectory of your SDK directory. If you provide a filename as an argument, the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> command runs the file's contents as a Python program; otherwise, it starts an interactive session.</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">monkeyrunner程序运行方式有两种： 从文件中运行以及在交互session输入MR声明。 两种方式都可以通过调用SDK目录子目录tool中的monkeyrunner命令运行。 当你以argument来提供文件名的审核后， 这个命令会以Python程序来运行文件内容。 否则的就会启动交互session</span></font></div></div><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">The syntax of the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> command is</span></span></span></div><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">monkeyrunner命令的语法</span></span></span></div></div><pre style="font-size: 13px; margin-top: 0px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); background-position: initial initial; background-repeat: initial initial;"><span style="color: rgb(0, 0, 0);">monkeyrunner </span><span style="color: rgb(102, 102, 0);">-</span><span style="color: rgb(0, 0, 0);">plugin </span><span style="color: rgb(136, 0, 0);">&lt;plugin_jar&gt;</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">&lt;program_filename&gt;</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">&lt;program_options&gt;</span></pre><p style="margin: 0px 0px 12px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">Table 1 explains the flags and arguments.</span></span></span></p><p style="margin: 0px 0px 4px; font-size: 13px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><strong>Table 1.</strong> </span></span><code style="color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"> flags and arguments.</span></span></p><table style="margin: 0.5em 1em 1em 0px; border-collapse: collapse; border-spacing: 0px; border: 0px; width: 759px; background-color: rgb(247, 247, 247);"><tr><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); background-color: rgb(153, 153, 153);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;">Argument</span></span></th><th style="padding: 4px 12px; vertical-align: top; text-align: left; color: rgb(255, 255, 255); border: 1px solid rgb(221, 221, 221); background-color: rgb(153, 153, 153);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;">Description</span></span></th></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><div><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; margin-bottom: 0px;">-plugin &lt;plugin_jar&gt;</code></div></td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;">(Optional) Specifies a </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px;">.jar</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;"> file containing a plugin for monkeyrunner. To learn more about monkeyrunner plugins, see <a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#Plugins" style="color: rgb(3, 155, 229); text-decoration: none; margin-bottom: 0px;"><span style="font-size: 1em;">Extending monkeyrunner with plugins</span></a>. To specify more than one file, include the argument multiple times.</span></span></span></div><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;">指明包含MR插件的jar文件。， 想了解更多关于插件的信息， 请看</span></span></span><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"> <a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#Plugins" style="color: rgb(3, 155, 229); text-decoration: none; margin-bottom: 0px;">Extending monkeyrunner with plugins</a>. 要想指明多个文件， 则需要多次包含 argument</span></span></div></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; margin-bottom: 0px;">&lt;program_filename&gt;</code></td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;">If you provide this argument, the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; margin-bottom: 0px;">monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;"> command runs the contents of the file as a Python program. If the argument is not provided, the command starts an interactive session.</span></span></span></div><div><span style="font-size: 15px;"><span style="font-family: Roboto;">当你提供argument， 命令会以Python程序的语法来运行文件内容。 如没有argument的话，命令就会启动 一个交互的session</span></span></div></td></tr><tr><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; margin-bottom: 0px;">&lt;program_options&gt;</code></td><td style="padding: 4px 12px; vertical-align: top; text-align: left; border: 1px solid rgb(221, 221, 221); background-color: inherit;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-family: Roboto, sans-serif;"><span style="font-size: 1em;">(Optional) Flags and arguments for the program in &lt;program_file&gt;. 在程序文件中的 标志和argument</span></span></span></td></tr></table><h2 style="color: rgba(0, 0, 0, 0.870588); clear: left; font-size: 28px; font-weight: 400; margin: 24px 0px 0px;"><span style="font-family: Roboto, sans-serif;">monkeyrunner Built-in HelpMR内置帮助</span></h2><hr style="height: 1px; margin: 7px 0px 12px; border: 0px; background: rgb(229, 229, 229);"/><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">You can generate an API reference for monkeyrunner by running:</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">运行一下命令，便可以生成API参考文件</span></font></div></div><pre style="font-size: 13px; margin-top: 0px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); background-position: initial initial; background-repeat: initial initial;"><span style="color: rgb(0, 0, 0);">monkeyrunner help</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">py </span><span style="color: rgb(136, 0, 0);">&lt;format&gt;</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">&lt;outfile&gt;</span></pre><p style="margin: 0px 0px 12px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">The arguments are:</span></span></span></p><ul style="margin: 0px 0px 15px 20px; padding: 0px;"><li style="margin: 0px 0px 12px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">&lt;format&gt;</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> is either </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">text</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> for plain text output or </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">html</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> for HTML output.输出格式可以是.txt也可以是.html</span></span></span></li><li style="margin: 0px 0px 12px;"><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">&lt;outfile&gt;</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> is a path-qualified name for the output file. 输出文件的限定路径的名字</span></span></span></li></ul><h2 style="color: rgba(0, 0, 0, 0.870588); clear: left; font-size: 28px; font-weight: 400; margin: 24px 0px 0px;"><span style="font-family: Roboto, sans-serif;">Extending monkeyrunner with Plugins MR扩展</span></h2><hr style="height: 1px; margin: 7px 0px 12px; border: 0px; background: rgb(229, 229, 229);"/><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">You can extend the monkeyrunner API with classes you write in the Java programming language and build into one or more </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">.jar</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> files. You can use this feature to extend the monkeyrunner API with your own classes or to extend the existing classes. You can also use this feature to initialize the monkeyrunner environment.</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">你可以用Java写一些类， 编译成.jar 文件来扩展MR API。你可以使用这个功能用你自己的类来扩展MR  API 或现有的类。 你也可以使用这个功能来初始化 MR环境</span></font></div></div><p style="margin: 0px 0px 12px;"><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">To provide a plugin to monkeyrunner, invoke the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> command with the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">-plugin &lt;plugin_jar&gt;</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> argument described in <a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#table1" style="color: rgb(3, 155, 229); text-decoration: none;">table 1</a>.</span></span></span></p><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">In your plugin code, you can import and extend the the main monkeyrunner classes </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">MonkeyDevice</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">, </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">MonkeyImage</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">, and</span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">MonkeyRunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> in </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">com.android.monkeyrunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> (see <a href="http://developer.android.com/tools/help/monkeyrunner_concepts.html#APIClasses" style="color: rgb(3, 155, 229); text-decoration: none;">The monkeyrunner API</a>).</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">要向MR提供插件， 可以调用monkeyrunner目录和表一中描述的 argument </span></font><code style="font-size: 13px; font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);"><span style="color: rgb(0, 102, 0);">-plugin &lt;plugin_jar&gt;。</span> <span style="font-size: 15px;">在你的插件代码里， 你可以引用扩展monkeyrunner中的三个主类</span></code></div></div><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">Note that plugins do not give you access to the Android SDK. You can't import packages such as </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">com.android.app</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">. This is because monkeyrunner interacts with the device or emulator 。below the level of the framework APIs.</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">需要注意的是，插件里没有权限访问sdk。 你无法引入</span></font><font face="Roboto, sans-serif"><span style="font-size: 14px;">类似</span></font><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">com.android.app</code> <font face="Roboto, sans-serif"><span style="font-size: 14px;">的包</span></font><font face="Roboto, sans-serif"><span style="font-size: 14px;">， 因为是在Framework API层级之下与设备和模拟器交互的</span></font></div></div><div><br/></div><div style="font-weight: 400; margin: 16px 0px;"><div><span style="color: rgba(0, 0, 0, 0.867188);"><span style="font-size: 24px;"><span style="font-family: Roboto, sans-serif;">The plugin startup clas</span></span></span><span style="color: rgba(0, 0, 0, 0.867188);"><span style="font-size: 24px;"><span style="font-family: Roboto, sans-serif;">s </span></span></span><span style="color: rgba(0, 0, 0, 0.867188);"><span style="font-size: 24px;"><span style="font-family: Roboto, sans-serif;">插件启动类</span></span></span></div></div><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">The </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">.jar</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> file for a plugin can specify a class that is instantiated before script processing starts. To specify this class, add the key </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">MonkeyRunnerStartupRunner</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> to the </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">.jar</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> file's manifest. The value should be the name of the class to run at startup. The following snippet shows how you would do this within an </span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">ant</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;"> build script:</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;">插件的jar文件可以在脚本处理开始之前指定实例化对象， 只需将 key<span style="color: rgb(160, 0, 23);"> </span></span></font><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">MonkeyRunnerStartupRunner</code> <font face="Roboto, sans-serif"><span style="font-size: 14px;">加到 jar文件的manifest中就可以了。 只应该是要在启动时运行的类名。 下面小段代码展示了在 一个</span></font><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">ant</code> <font face="Roboto, sans-serif"><span style="font-size: 14px;">build 脚本中的做法</span></font></div><div><br/></div></div><pre style="font-size: 13px; margin-top: 0px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); background-position: initial initial; background-repeat: initial initial;"><span style="color: rgb(0, 0, 136);">&lt;jar</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 34, 136);">jarfile</span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(136, 0, 0);">&quot;myplugin&quot;</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 34, 136);">basedir</span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(136, 0, 0);">&quot;${build.dir}&quot;</span><span style="color: rgb(0, 0, 136);">&gt;</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(0, 0, 136);">&lt;manifest&gt;</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(0, 0, 136);">&lt;attribute</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 34, 136);">name</span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(136, 0, 0);">&quot;MonkeyRunnerStartupRunner&quot;</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 34, 136);">value</span><span style="color: rgb(102, 102, 0);">=</span><span style="color: rgb(136, 0, 0);">&quot;com.myapp.myplugin&quot;</span><span style="color: rgb(0, 0, 136);">/&gt;</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(0, 0, 136);">&lt;/manifest&gt;</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(0, 0, 136);">&lt;/jar&gt;</span><span style="color: rgb(0, 0, 0);"><br/><br/></span></pre><div style="margin: 0px 0px 12px;"><div><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">To get access to monkeyrunner's runtime environment, the startup class can implement</span></span></span><code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">com.google.common.base.Predicate&lt;PythonInterpreter&gt;</code><span style="color: rgba(0, 0, 0, 0.679688);"><span style="font-size: 14px;"><span style="font-family: Roboto, sans-serif;">. For example, this class sets up some variables in the default namespace:</span></span></span></div><div><font face="Roboto, sans-serif"><span style="font-size: 14px;"> 这个启动类</span></font> <code style="font-size: 13px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 3px 5px; background-color: rgb(247, 247, 247);">com.google.common.base.Predicate&lt;PythonInterpreter&gt;</code> <font face="Roboto, sans-serif"><span style="font-size: 14px;">可以实现</span></font><font face="Roboto, sans-serif"><span style="font-size: 14px;">访问 MR 运行环境</span></font><font face="Roboto, sans-serif"><span style="font-size: 14px;">。 例如， 这个类在默认的命名空间里设置了几个变量</span></font></div></div><pre style="font-size: 13px; margin-top: 0px; color: rgb(0, 102, 0); font-family: Consolas, &apos;Liberation Mono&apos;, Menlo, Courier, monospace; -webkit-font-smoothing: subpixel-antialiased; padding: 1em; overflow: auto; border: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); background-position: initial initial; background-repeat: initial initial;"><span style="color: rgb(0, 0, 136);">package</span><span style="color: rgb(0, 0, 0);"> com</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">android</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">example</span><span style="color: rgb(102, 102, 0);">;</span><span style="color: rgb(0, 0, 0);"><br/><br/></span><span style="color: rgb(0, 0, 136);">import</span><span style="color: rgb(0, 0, 0);"> com</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">google</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">common</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 136);">base</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(102, 0, 102);">Predicate</span><span style="color: rgb(102, 102, 0);">;</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(0, 0, 136);">import</span><span style="color: rgb(0, 0, 0);"> org</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">python</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 0);">util</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(102, 0, 102);">PythonInterpreter</span><span style="color: rgb(102, 102, 0);">;</span><span style="color: rgb(0, 0, 0);"><br/><br/></span><span style="color: rgb(0, 0, 136);">public</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(0, 0, 136);">class</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 0, 102);">Main</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(0, 0, 136);">implements</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 0, 102);">Predicate</span><span style="color: rgb(102, 102, 0);">&lt;</span><span style="color: rgb(102, 0, 102);">PythonInterpreter</span><span style="color: rgb(102, 102, 0);">&gt;</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 102, 0);">{</span><span style="color: rgb(0, 0, 0);"><br/>    </span><span style="color: rgb(0, 102, 102);">@Override</span><span style="color: rgb(0, 0, 0);"><br/>    </span><span style="color: rgb(0, 0, 136);">public</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(0, 0, 136);">boolean</span><span style="color: rgb(0, 0, 0);"> apply</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(102, 0, 102);">PythonInterpreter</span><span style="color: rgb(0, 0, 0);"> anInterpreter</span><span style="color: rgb(102, 102, 0);">)</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(102, 102, 0);">{</span><span style="color: rgb(0, 0, 0);"><br/><br/>        </span>/*<br/>        * Examples of creating and initializing variables in the monkeyrunner environment's<br/>        * namespace. During execution, the monkeyrunner program can refer to the variables &quot;newtest&quot;<br/>        * and &quot;use_emulator&quot;<br/>        *<br/>        */<span style="color: rgb(0, 0, 0);"><br/>        anInterpreter</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 136);">set</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(136, 0, 0);">&quot;newtest&quot;</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(136, 0, 0);">&quot;enabled&quot;</span><span style="color: rgb(102, 102, 0);">);</span><span style="color: rgb(0, 0, 0);"><br/>        anInterpreter</span><span style="color: rgb(102, 102, 0);">.</span><span style="color: rgb(0, 0, 136);">set</span><span style="color: rgb(102, 102, 0);">(</span><span style="color: rgb(136, 0, 0);">&quot;use_emulator&quot;</span><span style="color: rgb(102, 102, 0);">,</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(0, 102, 102);">1</span><span style="color: rgb(102, 102, 0);">);</span><span style="color: rgb(0, 0, 0);"><br/><br/>        </span><span style="color: rgb(0, 0, 136);">return</span><span style="color: rgb(0, 0, 0);"> </span><span style="color: rgb(0, 0, 136);">true</span><span style="color: rgb(102, 102, 0);">;</span><span style="color: rgb(0, 0, 0);"><br/>    </span><span style="color: rgb(102, 102, 0);">}</span><span style="color: rgb(0, 0, 0);"><br/></span><span style="color: rgb(102, 102, 0);">}</span></pre></div></div></span>
</div></body></html> 